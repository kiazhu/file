mipi lcd/mipi dsi
1.DSI Layer Definitions: PHY Layer/Lane Management/Low Level Protocol/Application             
	PHY Layer:
		Start of Packet / End of Packet;		Serializer / Deserializer;;		Clock Management (DDR);		Electrical Layer (SLVS)
		PHY收发器 输入/输出电路和时钟机制，能从比特流中捕获到“1”或者“0”，注意，DSI（SLVS）的电气基础具有两种不同的操作模式，每种操作模式都有自己的一组电气参数。

	Lane Management: 
		Lane Distribution and Merging
		DSI具有通道可扩展性，可提高性能。 数据信号的数量取决于应用的带宽要求，可以是1,2,3或4。 接口的发送器侧将输出数据流分配给一个或多个通道（“分配器”功能）。 在接收端，接口从Lanes收集字节并将它们合并成一个重新组合的数据流，恢复原始流序列（“合并”功能）。

	Low Level Protocol:
		Packet Based Protocol;		ECC and Checksum Generation andTesting
		在最低级别，DSI协议指定遍历接口的位和字节的序列和值。 它指定字节如何组织成称为数据包的已定义组。 该协议定义了每个数据包所需的标头，以及如何生成和解释标头信息。接口的发送端将标头和错误检查信息附加到正在传输的数据。 在接收侧，标头被剥离并由接收器中的相应逻辑解释。 错误检查信息可用于测试传入数据的完整性。 DSI协议还记录了如何使用单个DSI将数据包标记为将多个命令或数据流交织到不同的目的地。

	Application:
		Pixel to Byte Packing Formats;		Coded Bitstream Format;		Command Generation / Interpretation
		该层描述了数据流中包含的数据的更高级编码和解释。 取决于显示子系统架构，它可以由具有规定格式的像素或编码比特流组成，或者由显示模块内的显示控制器解释的命令组成。 DSI规范描述了像素值，比特流，命令和命令参数到包组件中的字节的映射。

2.Command and Video Modes
		符合DSI标准的外设支持两种基本操作模式：命令模式和视频模式。 使用哪种模式取决于外设的架构和功能。 模式定义反映了DSI用于显示互连的主要用途，但并非旨在限制DSI在其他应用程序中运行。
		通常，外设能够进行命令模式操作或视频模式操作。 一些视频模式显示模块还包括简化形式的命令模式操作，其中显示模块可以从缩小尺寸或部分压缩或部分未压缩帧缓冲器刷新其屏幕，并且到主处理器的接口（DSI）可以是 关闭以降低功耗。

	Command Mode
		命令模式是指这样的操作，其中事务主要采取将命令和数据发送到包含显示控制器的外围设备（例如显示模块）的形式。 显示控制器可以包括本地寄存器和压缩或未压缩的帧缓冲器。 使用命令模式的系统写入寄存器和帧缓冲存储器并从中读取。 主处理器通过向显示控制器发送命令，参数和数据来间接控制外围设备的活动。 主处理器还可以读取显示模块状态信息或帧存储器的内容。 命令模式操作需要双向接口。

	Video Mode Operation
		视频模式是指从主处理器到外围设备的传输采用实时像素流的形式的操作。 在正常操作中，显示模块依靠主处理器以足够的带宽提供图像数据，以避免显示图像中的闪烁或其他可见伪像。 视频信息只能使用高速模式传输。
		一些视频模式架构可以包括简单的定时控制器和部分帧缓冲器，用于在待机或低功率模式下维持部分屏幕或较低分辨率的图像。 这允许关闭接口以降低功耗。
		为了降低复杂性和成本，仅在视频模式下操作的系统可以使用单向数据路径。

	Virtual Channel Capability
		虽然此规范仅解决了主机处理器与单个外设的连接问题，但DSI在主处理器与多个处理器之间进行了通信，具有虚拟通道功能，物理显示模块。。 桥设备可以创建到显示模块或其他设备的多个单独连接，或者显示模块或设备可以支持多个虚拟信道。 显示模块完全独立，可以同时运行，并且可以具有不同的显示架构类型，仅受共享DSI链路上可用的总带宽限制。 将多个外围设备连接到单个链路的详细信息超出了本文档的范围。		
		由于接口带宽在外围设备之间共享，因此存在限制多外围系统的物理范围和性能的约束。
		DSI协议允许最多四个虚拟通道，使多个外围设备的流量共享一个公共DSI链路。例如，在一些高分辨率显示器设计中，多个物理驱动器服务于共同显示面板的不同区域。每个驱动程序都集成了自己的显示控制器，通过DSI连接到主机处理器。使用虚拟通道，显示控制器将数据定向到各个驱动程序，无需多个接口或复杂的多路复用方案。一个信道是双向命令模式信道而第二信道是视频模式单向信道的设备也可以使用虚拟信道。虚拟信道可以由接收来自主处理器的隔行视频的显示模块或DSI桥设备采用，其中一个信道对应于第一场，另一个信道是隔行视频帧的第二场。 DSI规范对分配给用于指定隔行扫描场的每个虚拟通道的特定值没有要求。为清楚起见，可以将第一隔行扫描视频场指定为DI [7：6] = 0b00，并且可以指定第二隔行扫描视频场。 DI [7：6] = 0b01。


3.DSI Physical Layer
	使用一个或多个串行数据信号和随附的串行时钟在主机处理器和外围设备之间传输信息。 在总线上发送高速串行数据的动作称为HS传输或突发。
	在传输之间，差分数据信号或Lane进入低功率状态（LPS）。 当接口不主动发送或接收高速数据时，接口应处于LPS状态。 图3显示了HS传输的基本结构。 N是传输中发送的总字节数。
	D-PHY低级协议指定一个字节的最小数据单元，并且传输包含整数个字节。
	
	3.1 Data Flow Control
		协议层和PHY层之间没有握手，一旦传输正在进行，协议层就可以限制数据传输到PHY层或从PHY层传输数据。 数据包应完整地发送和接收，不会中断。 链路两端的协议层和数据缓冲应始终具有等于或大于PHY层电路的带宽。 实际结果是系统实现者应确保接收器具有等于或大于发射器的带宽能力。
	3.2 Bidirectionality and Low Power Signaling Policy
		DSI实现的物理层由一到四个数据通道和一个时钟通道组成。 在命令模式系统中，数据通道0应是双向的; 附加数据通道应是单向的。 在视频模式系统中，数据通道0可以是双向的或单向的; 附加数据通道应是单向的。 有关详细信息，请参见第5.3节和第5.4节。
		对于两种接口类型，时钟通道应仅由主处理器驱动，而不是由外设驱动。
		正向低功率传输仅应使用数据通道0。 数据通道0上的反向传输仅应使用低功耗模式。 外设应能够在低功率或高速模式下接收任何传输。 注意，当以LP模式发送时，传输带宽显着减小。
		对于双向通道，数据应仅使用低功耗（LP）模式在外设到处理器或反向方向上传输。 有关不同传输模式的详细信息，请参见[MIPI04]。
		PHY和协议层之间的接口有几个控制总线方向的信号。 当主机发送器需要来自外围设备的响应时，例如， 返回READ数据或状态信息，它在传输的最后一个数据包期间将TurnRequest置为其PHY。 这告诉PHY层在EoT序列之后断言总线周转（BTA）命令。
		当外设接收总线周转命令时，其PHY层将TurnRequest置为协议层的输入。 这告诉接收协议层它应准备向主机处理器发送响应。 通常，刚接收的数据包告诉协议层一旦总线可用于发送到主处理器，将发送什么信息。
		在发送其响应之后，外设类似地使用TurnRequest将总线控制返回到主机处理器到其自己的PHY层。

	3.3 Command Mode Interfaces
		在命令模式下运行的DSI主机处理器的最低物理层要求是：
		Data Lane Module: CIL-MFAA (HS-TX, LP-TX, LP-RX, and LP-CD)
		Clock Lane Module: CIL-MCNN (HS-TX, LP-TX)

		在命令模式下运行的DSI外设的最低物理层要求是：
		Data Lane Module: CIL-SFAA (HS-RX, LP-RX, LP-TX, and LP-CD)
		Clock Lane Module: CIL-SCNN (HS-RX, LP-RX)

		双向链路应支持数据通道0的反向逃逸模式，以支持读取数据的LPDT以及外设发出的ACK和TE触发消息。 在正向，数据通道0应支持LPDT，如[MIPI04]中所述。 所有触发消息都应通过数据通道0进行通信

	3.4 Video Mode Interfaces
		在视频模式下运行的DSI发射器的最低物理层要求是：
		Data Lane Module: CIL-MFAN (HS-TX, LP-TX)
		Clock Lane Module: CIL-MCNN (HS-TX, LP-TX)

		在视频模式下运行的DSI接收器的最低物理层要求是：
		Data Lane Module: CIL-SFAN (HS-RX, LP-RX)
		Clock Lane Module: CIL-SCNN (HS-RX, LP-RX)

		在正向，数据通道0应支持LPDT，如[MIPI04]中所述。 所有触发消息都应通过数据通道0进行通信。

	3.5 Bidirectional Control Mechanism
		转向总线由令牌传递机制控制：主机处理器发送总线转向（BTA）请求，该请求向外围设备传达其释放或停止驱动外围设备可以传输的数据路径的意图 一个或多个数据包返回主机处理器。 完成后，外围设备应将总线控制权返回给主处理器。 使用PHY级协议提供的Escape Mode机制发信号通知总线Turn-Around。
		在双向系统中，由于EMI可能导致总线争用，因此存在错误行为的可能性。 本说明书中提供了用于从任何总线争用事件中恢复而不强制整个系统“硬复位”的机制。
		
	3.6 Clock Management
		DSI时钟是从主处理器到外设的信号。 在某些系统中，它可以提供多种功能：
		DSI位时钟：在整个链路上，DSI时钟用作源同步位时钟，用于捕获接收器PHY中的串行数据位。 传输数据时，该时钟应处于活动状态。
		字节时钟：分频后，DSI时钟用于在协议层和应用层之间的概念接口上生成字节时钟。 在HS传输期间，每个数据字节都伴随有字节时钟。 与DSI位时钟一样，字节时钟在传输数据时应处于活动状态。 在协议层到应用层接口，所有操作都与字节时钟同步。
		应用程序时钟：DSI位时钟的分频版本可用于外设的其他时钟功能。 这些“应用程序时钟”可能需要在没有传输串行数据时运行，或者它们可能需要不断运行（连续时钟）以支持外设上的有源电路。 如何生成和使用这些附加时钟的细节超出了本文档的范围。
		对于连续时钟行为，时钟通道保持高速模式，在HS数据包传输之间产生有效时钟信号。 对于非连续时钟行为，时钟通道在HS数据包传输之间进入LP-11状态。
























echo 0x01f02e14 > dump;cat dump























